import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { Appear, Image } from 'mdx-deck'
import { github, vsDark } from "@code-surfer/themes";
import img3core from './3-core-web-vitals.png'
import imgExtensions from './extension.png'


export const theme = vsDark;

## [Web Vitals](https://web.dev/vitals/) - ~~Case Study~~ implementation (Bonus [Reactjs](https://reactjs.org))

###  Web.dev [LIVE] Extended - GDG Bandung

[@ri7nz](https://github.com/ri7nz) 

---

### Hi, saya [R Adysurya A](https://github.com/ri7nz) üëã

<ul>
    <Appear>
        <li> Software Engineer, Frontend </li>
        <li> Meng-GILA-i `Teknologi Web` </li>
    </Appear>
</ul>

---

### Apa yang saya bahas ?

* Lanjutan, [Web Vitals](https://eka-wdle-bdg-2020.netlify.app/#1) oleh [@ekafyi](https://github.com/@ekafyi)
* Hal teknis [Web Vitals](https://github.com/GoogleChrome/web-vitals) 

---

### Apa yang TIDAK saya bahas ? 

<ul>
    <Appear>
    <li>Dasar - Dasar JavaScript</li>
    <li>Dasar - Dasar Reactjs</li>
    </Appear>
</ul>

---

### 3 Core Web Vitals

<Image 
    alt="3 core web vitals"
    src={img3core}
    style={{
        width: '80vw',
        height: '300px',
        objectFit: 'fill',
  }}
/>

#### We Want Metrics üòç for make powerful Web Apps

---

### Web Vitals: Library vs Web Extension

<ul>
    <Appear>
        <li> Data Lab </li>
        <li> Data Lapangan </li>
    </Appear>
</ul>

---

### Extension 

<Image 
    alt="3 core web vitals"
    src={imgExtensions}
    style={{
        width: '80vw',
        height: '300px',
        objectFit: 'fill',
  }}
  />

---

<CodeSurferColumns>

<Step title="using web-vitals library" subtitle="sourcecode of web-vitals">

```js 2:6
// https://github.com/GoogleChrome/web-vitals/blob/master/src/index.ts
export {getCLS} from './getCLS.js';
export {getFCP} from './getFCP.js';
export {getFID} from './getFID.js';
export {getLCP} from './getLCP.js';
export {getTTFB} from './getTTFB.js';

export * from './types.js';
```

</Step>

<Step title="basic usage" >

```js
import {getCLS, getFCP, getFID,  getLCP, getTTFB} from 'web-vitals'
```

</Step>

<Step title="example use web-vitals library" subtitle="https://github.com/facebook/create-react-app/master/packages/cra-template/template/src/reportWebVitals.js">

```js file=./reportWebVitals.js
```

</Step>
    
<Step title="define function" subtitle="with paramater function">

```js 1:2,10 file=./reportWebVitals.js
```

</Step>

<Step title="import web-vitals library" subtitle="with lazy-import">

```js 3,9 file=./reportWebVitals.js
```

</Step>

<Step title="call core web-vitals API" subtitle="measure & report">

```js 4:8 file=./reportWebVitals.js
```

</Step>

<Step title="export">

```js 13 file=./reportWebVitals.js
```

</Step>

<Step title="Usage">

```js 
import reportWebVitals from 'reportWebVitals'

reportWebVitals()
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns>

<Step title="example: create-react-app template">

```js file=./cra-index.js
```

</Step>

<Step title="example: create-react-app template">

```js 6 file=./cra-index.js
```

</Step>

<Step title="example: create-react-app template">

```js 23 file=./cra-index.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns>

<Step title="metric">

```js file=./types-metric.js
```

</Step>

<Step title="metric.name">

```js 19 file=./types-metric.js
```

</Step>

<Step title="metric.delta">

```js 26 file=./types-metric.js
```

</Step>

<Step title="metric.id">

```js 32 file=./types-metric.js
```

</Step>

<Step title="send to analytics" subtitle="https://www.virendrachandak.com/techtalk/how-to-track-web-vitals-in-google-analytics/">

```js file=./sendToAnalytics.js
```

</Step>

<Step title="get metric by key object">

```js 2:4 file=./sendToAnalytics.js
```

</Step>

<Step title="make sure you have global ga">

```js 7 file=./sendToAnalytics.js
```

</Step>

<Step title="pass name from metric">

```js 8 file=./sendToAnalytics.js
```

</Step>

<Step title="round delta from metric">

```js 9:14 file=./sendToAnalytics.js
```

</Step>

<Step title="set id by metric">

```js 15:19 file=./sendToAnalytics.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns>

<Step title="Next.js 9.4: üì¢ integrated web-vitals" subtitle="a new method called reportWebVitals">

```js
// a new method called reportWebVitals which can be exported from pages/_app.js

// Will be called once for every metric that has to be reported.
export function reportWebVitals(metric) {
  // These metrics can be sent to any analytics service
  console.log(metric)
}

function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />
}

export default MyApp
```

</Step>

</CodeSurferColumns>

---

## DEMO ü•≥

---

## THANK YOU üëê

[@ri7nz](https://rin.rocks)
